(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e5743868"],{"159b":function(e,t,r){var o=r("da84"),a=r("fdbc"),n=r("17c2"),i=r("9112");for(var s in a){var c=o[s],l=c&&c.prototype;if(l&&l.forEach!==n)try{i(l,"forEach",n)}catch(u){l.forEach=n}}},"17c2":function(e,t,r){"use strict";var o=r("b727").forEach,a=r("a640"),n=r("ae40"),i=a("forEach"),s=n("forEach");e.exports=i&&s?[].forEach:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}},2483:function(e,t,r){},4160:function(e,t,r){"use strict";var o=r("23e7"),a=r("17c2");o({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"4de4":function(e,t,r){"use strict";var o=r("23e7"),a=r("b727").filter,n=r("1dde"),i=r("ae40"),s=n("filter"),c=i("filter");o({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"6bb1":function(e,t,r){"use strict";var o=r("2483"),a=r.n(o);a.a},a640:function(e,t,r){"use strict";var o=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&o((function(){r.call(null,t||function(){throw 1},1)}))}},b64b:function(e,t,r){var o=r("23e7"),a=r("7b0b"),n=r("df75"),i=r("d039"),s=i((function(){n(1)}));o({target:"Object",stat:!0,forced:s},{keys:function(e){return n(a(e))}})},dbb4:function(e,t,r){var o=r("23e7"),a=r("83ab"),n=r("56ef"),i=r("fc6a"),s=r("06cf"),c=r("8418");o({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,r,o=i(e),a=s.f,l=n(o),u={},d=0;while(l.length>d)r=a(o,t=l[d++]),void 0!==r&&c(u,t,r);return u}})},dd7b:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("a-form",{ref:"formLogin",staticClass:"user-layout-login",attrs:{id:"formLogin",form:e.form},on:{submit:e.handleSubmit}},[r("a-tabs",{attrs:{activeKey:e.customActiveKey,tabBarStyle:{textAlign:"center",borderBottom:"unset"}},on:{change:e.handleTabClick}},[r("a-tab-pane",{key:"tab1",attrs:{tab:"手机号登录"}},[r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{rules:[{required:!0,pattern:/^1[34578]\d{9}$/,message:"请输入正确的手机号"}],validateTrigger:"change"}],expression:"['mobile', {rules: [{ required: true, pattern: /^1[34578]\\d{9}$/, message: '请输入正确的手机号' }], validateTrigger: 'change'}]"}],attrs:{size:"large",type:"text",placeholder:"手机号"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mobile"},slot:"prefix"})],1)],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{staticClass:"gutter-row",attrs:{span:16}},[r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["captcha",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"blur"}],expression:"['captcha', {rules: [{ required: true, message: '请输入验证码' }], validateTrigger: 'blur'}]"}],attrs:{size:"large",type:"text",placeholder:"验证码"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1)],1),r("a-col",{staticClass:"gutter-row",attrs:{span:8}},[r("a-button",{staticClass:"getCaptcha",attrs:{tabindex:"-1",disabled:e.state.smsSendBtn},domProps:{textContent:e._s(e.state.smsSendBtn?e.state.time+" s":"获取验证码")},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.getCaptcha(t)}}})],1)],1)],1)],1),r("a-form-item",{staticClass:"class1"},[r("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.state.loginBtn,disabled:e.state.loginBtn}},[e._v("确定")])],1)],1)],1)},a=[],n=(r("d3b7"),r("5530")),i=r("3dfd"),s={userName:"",mobile:"",token:""},c={userInfo:s,data:function(){return{customActiveKey:"tab1",loginBtn:!1,loginType:0,stepCaptchaVisible:!1,form:this.$form.createForm(this),state:{time:60,loginBtn:!1,loginType:0,smsSendBtn:!1},validatorRules:{mobile:{rules:[{validator:this.validateMobile}]},vcode:{rule:[{required:!0,message:"请输入验证码!"}]},inputCode:{rules:[{required:!0,message:"请输入验证码!"},{validator:this.validateInputCode}]}},vcodeImg:"",verifiedCode:"",inputCodeContent:"",inputCodeNull:!0,verkey:""}},activated:function(){var e=JSON.parse(localStorage.getItem("userInfo"));null!=e&&""!=e.token&&""!=e.userId&&this.$router.push("/user")},methods:{handleTabClick:function(e){this.customActiveKey=e},handleSubmit:function(e){var t=this;e.preventDefault();var r=this.form.validateFields,o=this.state,a=this.customActiveKey,c=this.verkey;console.log("verkey",c),o.loginBtn=!0,console.log("customActiveKey",a);var l=["mobile","captcha","vcode","verkey"];console.log("validateFieldsKey",l),r(l,{force:!0},(function(e,r){if(e)setTimeout((function(){o.loginBtn=!1}),600);else{var a=Object(n["a"])({},r);delete a.userAccount,a.verkey=c,fetch(i["a"].baseUrl+"/api/user/login.do",{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded;charset=UTF-8"},body:"mobile="+r.mobile+"&code="+r.captcha}).then((function(e){return e.json()})).then((function(e){console.log("login ",e.obj,e.errCode,e),"200"==e.errCode&&e.obj?(s.userName=e.obj.userName,s.mobile=e.obj.mobile,s.token=e.obj.token,s.userId=e.obj.userId,localStorage.setItem("userInfo",JSON.stringify(s)),console.log("localStorage['userInfo']",localStorage.getItem("userInfo")),t.$router.push({path:"user"})):(t.requestFailed(e),o.loginBtn=!1)}))}}))},getCaptcha:function(e){var t=this;e.preventDefault();var r=this.form.validateFields,o=this.state;r(["mobile"],{force:!0},(function(e,r){if(!e){o.smsSendBtn=!0;var a=window.setInterval((function(){o.time--<=0&&(o.time=60,o.smsSendBtn=!1,window.clearInterval(a))}),1e3),n=t.$message.loading("验证码发送中..",0);fetch(i["a"].baseUrl+"/api/user/sendCode.do",{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded;charset=UTF-8"},body:"mobile="+r.mobile}).then((function(e){return e.json()})).then((function(e){console.log("login ",e.obj,e.errCode,e),"200"==e.errCode?(setTimeout(n,2500),t.$notification["success"]({message:"提示",description:"验证码【"+e.obj+"】已经发送到您手机",duration:8})):(t.requestFailed(e),o.loginBtn=!1)}))}}))},requestFailed:function(e){this.$notification["error"]({message:"错误",description:((e.response||{}).data||{}).message||e.msg||"请求出现错误，请稍后再试",duration:4})}}},l=c,u=(r("6bb1"),r("2877")),d=Object(u["a"])(l,o,a,!1,null,"0b5e30cd",null);t["default"]=d.exports},e439:function(e,t,r){var o=r("23e7"),a=r("d039"),n=r("fc6a"),i=r("06cf").f,s=r("83ab"),c=a((function(){i(1)})),l=!s||c;o({target:"Object",stat:!0,forced:l,sham:!s},{getOwnPropertyDescriptor:function(e,t){return i(n(e),t)}})}}]);
//# sourceMappingURL=chunk-e5743868.70e31a3a.js.map